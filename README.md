# 스프링 핵심 원리 - 고급편

## 2. 쓰레드 로컬 - ThreadLocal

### 개요

- 쓰레드 로컬은 해당 쓰레드만 접근할 수 있는 특별한 저장소를 말한다.
- 각 쓰레드마다 별도의 내부 저장소를 제공한다.
  - 따라서 다양한 쓰레드가 같은 인스턴스의 쓰레드 로컬 필드에 접근해도 문제가 없다.

### 주의사항

> 해당 쓰레드가 쓰레드 로컬을 모두 사용하고 나면 remove()를 호출해서 꼭 제거해주어야 한다.

- WAS는 쓰레드 풀을 운용한다. 즉, 반환된 쓰레드를 다시 재사용한다.
  - 만약 반환된 쓰레드가 쓰레드 로컬 저장소를 사용하고 저장소를 비우지 않았다면?
  - **장애발생!**
- 따라서 쓰레드 로컬 값을 다 사용하였다면 반드시 `ThreadLocal.remove()`를 통해 쓰레드 로컬 저장소를 비워주어야 한다.


